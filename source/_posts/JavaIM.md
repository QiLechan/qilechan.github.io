---
title: 基于Java的加密通讯软件
tags:
- 技术
categories:
- 技术
date: 2023-03-18
---
## 一、背景
随着互联网的普及和发展，人们越来越需要一种方便快捷、安全可靠的即时通讯工具。传统的即时通讯软件大多基于中心化架构，即需要依赖一个中心服务器进行消息的转发和管理，这种架构存在单点故障、信息泄漏等问题。因此，越来越多的人开始关注去中心化的端对端通讯技术，即直接将消息传递给目标用户，避免了中心服务器的干扰和风险。

由于技术原因，我们无法实现真正的端对端通讯。但可以实现快速部署的加密通信服务端用于替代。虽然本质上仍然属于中心化架构，但服务端可以由安装者自由控制，所有数据都经过非对称加密的方式加密传输，除非转发服务器被攻击导致数据泄露，基本不存在信息泄露的可能性。

为了满足这一需求，我们设计并实现了一款基于Java的加密通讯软件，使用GitHub进行版本控制和协作开发。服务端通过生成密钥对，用户可以通过安全的方式将服务端公钥部署到客户端，客户端每次发信使用服务端公钥进行RSA加密，服务端接收到加密信息后使用私钥解密，然后使用另一客户端发送到服务端的客户端公钥进行加密，再传输至另一客户端，客户端使用私钥进行解密。在每一次客户端接收加密信息之前，客户端都会重新生成一对密钥对并将公钥发送至服务端，提高了通讯的安全性。
同时，该软件具有良好的跨平台性能，可在不同操作系统和设备上运行，提高了用户的使用体验和便捷性。

## 二、目的
本研究的主要目的是探究如何利用Java语言开发一款加密通讯软件，并基于GitHub等工具实现版本控制、协作开发和自动构建。具体目标如下：
1.分析非对称加密通讯技术的原理和特点，研究如何使用Java语言实现加密通讯功能。
2.设计并实现一款基于Java的加密通讯软件，实现用户注册、登录、发送消息等基本功能。
3.使用GitHub进行版本控制和协作开发，协同开发团队进行代码的修改和更新。
4.评估该软件的性能、安全性和用户体验等方面，并讨论其优缺点和未来改进方向。

## 三、方法
为了实现上述目标，我们采用了如下方法：
1.学习端对端通讯技术原理和相关技术，研究如何使用Java语言实现端对端通讯功能。
2.设计并实现一款基于Java的加密通讯软件，采用RSA加密算法，支持用户注册、登录、发送消息等基本功能。
3. 使用GitHub进行版本控制和协作开发，建立仓库并维护代码，实现团队协作和代码的修改和更新。
4.对软件进行性能、安全性和用户体验等方面的评估和测试，并针对评估结果进行分析和讨论，探讨未来的改进方向。

## 四、实现
在本研究中，我们使用Java语言实现了一款基于RSA算法的加密通讯软件。该软件的功能包括用户注册、登录、发送消息等基本功能，同时具有跨平台、易用、安全可靠的特点。以下是该软件的实现过程和具体功能：
1.确定开发框架：我们使用Java语言作为主要开发语言，以命令行应用程序作为界面，使用Socket和ServerSocket实现通讯功能。
2.用户注册和登录：用户注册和登录功能是软件的核心功能之一，用户需要在启动程序后输入用户名和密码进行登录。若用户未注册，则需先进行注册，注册时需要输入用户名、密码等信息，完成后即可登录。
3.发送消息：用户可以向服务器发送消息，该消息将经过服务器广播给所有连接至服务器的用户，没有服务端公钥的客户端不会被接受。消息发送后，接收方将收到通知并可以查看消息。

项目的源码位于https://github.com/QiLechan/JavaIM，仓库遵循GPL-3.0开源协议，用户有运行、复制软件的自由，发行传播软件的自由，获得软件源码的自由，改进软件并将自己作出的改进版本向社会发行传播的自由，作者不承担使用者的任何责任。
项目使用Maven进行构建。
我们首先实现的是服务端的功能。主要选择使用了java.net.ServerSocket和java.net.Socket库来实现服务端与客户端之间的握手与传输信息，org.apache.logging.log4j库用于输出信息，java.io.File库用于公钥文件的输出。
Server.java的主类：
![code1](https://blog.qileoffice.top/images/carbon3.png)
 https://github.com/QiLechan/JavaIM/blob/main/src/main/java/org/yuezhikong/Server/Server.java
StartUserAuthThread()是用于实现用户登录的方法。方法首先创建一个新线程UserAuthThread，使用一个无限循环不断等待用户连接，并处理连接请求。
StartTimer()用于启动一个定时器用于计时。
StartCommandSystem()使用一个无限循环不断接收用户的输入的指令。
当服务端开始运行时，会提示输入要监听的端口号，然后根据配置文件（但是是在源代码中）中的变量决定服务端可以接受连接的总数量。检测目录下是否存在公钥，如果不存在，则重新生成新的公钥。如果检测有私钥但没有公钥，或存在公钥没有私钥，则会重新覆盖新的密钥对。
完成密钥生成后，开始处理用户登录的过程，登录的用户会被加入到Users的List中，之后启动接收消息线程，服务器开始消息广播。
用于实现对信息解密和重新加密发送的类主要通过调用接口ServerAPI中的SendMessageToAllClient()函数实现发信功能，以及RSA类进行加解密和输出密钥对，SendMessageToAllClient()内容如下：
![code2](https://blog.qileoffice.top/images/carbon.png)
在RSA.java中，最主要使用了第三方库hutool更加方便地实现了RSA加密的过程：
![code3](https://blog.qileoffice.top/images/carbon1.png)
客户端则与服务端相似，在运行前首先检查是否在运行目录下有服务端密钥，如果没有将会停止运行。客户端使用无限循环获取用户输入的信息。客户端开始运行时，会要求输入服务器的IP以及端口号，在输入正确的IP和端口后，将开始通讯握手。在握手成功后，服务端会向客户端发送响应信息，之后客户端开始等待用户输入信息。用户输入信息回车后，调用RSA类中的加密方法加密后发送至服务端。

以上为客户端及服务端简要的工作原理。为了方便，我们将客户端和服务端在一个程序中实现，以下是程序主类Main.java：
![code4](https://blog.qileoffice.top/images/carbon2.png)
在程序开始运行时，会询问用户使用客户端模式还是服务端模式，并根据用户的选择运行。

## 五、结果
在本研究中，我们成功地实现了一款基于Java的端对端通讯软件，该软件具有跨平台、安全可靠等优点，并采用了GitHub进行版本控制和协作开发。以下是该软件的测试结果和评估：
1.	性能测试：我们对软件的性能进行了测试，测试包括登录和发送消息等功能的响应时间和稳定性等方面。测试结果表明，软件的响应速度较快，且稳定性较好。
2.	安全性测试：我们对软件的安全性进行了测试，测试包括数据加密和防止数据泄露等方面。测试结果表明，软件的数据传输采用了加密协议，防止了数据泄露和劫持等安全问题。
3.	用户体验测试：我们邀请了多位用户测试软件，他们对软件的界面设计、功能实现、使用体验等方面都给予了较高的评价，认为该软件易于操作、功能齐全、界面美观等。

## 六、讨论和改进
在本研究中，我们对开发基于Java的端对端通讯软件进行了探索和实现，并取得了一定的成果。但是，在软件开发和测试过程中，我们也发现了一些问题和不足之处，需要进一步改进和优化。以下是我们的讨论和改进方向：
1.	优化通讯功能：在实现加密通讯功能时，我们采用了Socket和ServerSocket进行通讯。但是，该方法存在连接数限制和安全问题等，需要进一步改进和优化。
2.	添加GUI界面：我们没有为软件实现GUI界面，因此，我们需要进一步实现界面设计，提高用户体验。
3.	完善功能和性能：虽然我们实现了基本的用户注册、登录和发送消息等功能，但是还有一些功能需要完善，如用户个人信息管理和多人聊天等。此外，我们也需要进一步优化软件的性能，提高响应速度和稳定性。
4.	探索新的开发框架和技术：随着技术的不断发展，新的开发框架和技术不断涌现。因此，我们也需要不断探索新的开发框架和技术，以便进一步优化和改进软件。

## 七、结论
本研究成功地实现了一款基于Java的端对端通讯软件，该软件具有跨平台、安全可靠等优点，并采用了GitHub进行版本控制、协作开发以及自动构建。在软件开发和测试过程中，我们也发现了一些问题和不足之处，需要进一步改进和优化。因此，我们将继续改进软件的功能和性能，并探索新的开发框架和技术，以便进一步提高软件的质量和用户体验。
总之，本研究对于基于Java的加密通讯软件的开发和实现进行了深入的探索和研究，并取得了一定的成果。通过对软件开发、测试、优化等方面的不断努力和探索，我们成功地实现了一款具有一定功能和优势的端对端通讯软件。此外，通过使用GitHub进行版本控制、协作开发和自动构建，也进一步提高了软件的开发效率和质量。
当然，本研究还存在一些不足和问题，需要进一步改进和完善。例如，在加密通讯功能、界面设计、功能完善和性能优化等方面，我们都需要进一步努力和探索。同时，随着技术的不断发展和创新，我们也需要不断探索和引入新的开发框架和技术，以便进一步提高软件的质量和用户体验。
最后，我们希望本研究能够对Java开发者和相关从业人员提供一些参考和帮助，同时也期待更多的研究者和开发者加入到Java开发和创新的行列中来，共同推动Java技术的不断发展和进步。

## 鸣谢
子涵